<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calendario Web</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html,
    body {
      height: 100vh;
      width: 100vw;
      font-family: "Segoe UI", sans-serif;
      background: #111;
      color: white;
      overflow: hidden;
    }

    .calendar-container {
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .date,
    .month,
    .time {
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24vh; /* Máximo posible sin desbordar */
      font-weight: bold;
      line-height: 1; /* Cero espacio extra arriba o abajo del texto */
      white-space: nowrap;
    }

    .weather {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 12vh;
      margin-top: 2vh;
    }

    .weather-icon {
      font-size: 12vh;
    }
  </style>
</head>

<body>
  <div class="calendar-container">
    <div class="date" id="current-date">Hoy es Miércoles</div>
    <div class="month" id="current-month">25 de Marzo</div>
    <div class="time" id="current-time">14:30</div>
    <div class="weather">
      <span id="weather-icon" class="weather-icon">{{.WeatherIcon}}</span>
      <span id="temperature">{{.Temperature}}°C</span>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      if (document.documentElement.requestFullscreen) {
        document.documentElement.requestFullscreen();
      }
    });

    function updateDateTime() {
      const now = new Date();
      const days = ["Domingo", "Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado"];
      const months = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio",
        "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];

      const dayOfWeek = days[now.getDay()];
      const day = now.getDate();
      const month = months[now.getMonth()];

      const hours = now.getHours().toString().padStart(2, '0');
      const minutes = now.getMinutes().toString().padStart(2, '0');

      document.getElementById('current-date').textContent = `Hoy es ${dayOfWeek}`;
      document.getElementById('current-month').textContent = `${day} de ${month}`;
      document.getElementById('current-time').textContent = `${hours}:${minutes}`;
    }

    function updateWeather() {
      fetch('/')
        .then(response => response.text())
        .then(html => {
          const parser = new DOMParser();
          const doc = parser.parseFromString(html, 'text/html');
          const newWeatherIcon = doc.getElementById('weather-icon').textContent;
          const newTemperature = doc.getElementById('temperature').textContent;
          
          document.getElementById('weather-icon').textContent = newWeatherIcon;
          document.getElementById('temperature').textContent = newTemperature;
        })
        .catch(error => {
          console.error('Error actualizando el clima:', error);
          document.getElementById('temperature').textContent = 'N/A';
          document.getElementById('weather-icon').textContent = '❓';
        });
    }

    setInterval(updateDateTime, 1000);
    setInterval(updateWeather, 3600000); // Actualizar cada hora
    updateDateTime();
    updateWeather();
  </script>
</body>

</html>
